{"ast":null,"code":"import React,{useEffect}from'react';import Album from'../../components/Release';import tunnel from'../../res/tunnel.mp4';import'./category.css';import{CATEGORY_POSTS_ALL,options}from'../../graphql/Queries';import{Link,useParams,useLocation}from'react-router-dom';import useQueryPosts from'../../hooks/useQueryPosts';import Pagination from'../../components/Pagination';import{useMyContext}from'../../context/store';import{useInView}from'react-intersection-observer';import NotFound from'../../components/NotFound';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=function Category(){var _useQueryPosts=useQueryPosts({query:CATEGORY_POSTS_ALL}),posts=_useQueryPosts.posts,error=_useQueryPosts.error,status=_useQueryPosts.status;var _useParams=useParams(),slug=_useParams.slug;var location=useLocation();var _useMyContext=useMyContext(),totalPage=_useMyContext.totalPage;var _useInView=useInView({threshold:0.1}),ref=_useInView.ref,inView=_useInView.inView;useEffect(function(){if(location.search===''){window.scrollTo(0,0);}else{window.scrollTo(0,600);}},[location]);if(error)return/*#__PURE__*/_jsx(\"h2\",{children:error});if(status!=='start'&&posts.length===0){return/*#__PURE__*/_jsx(NotFound,{});}return/*#__PURE__*/_jsxs(\"main\",{className:\"album-container\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"video\",{autoPlay:true,loop:true,muted:true,className:\"album-video\",children:/*#__PURE__*/_jsx(\"source\",{src:tunnel,type:\"video/mp4\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"album-video-overlay\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"album-header-title \".concat(inView?'zoom-out':''),ref:ref,children:[slug.toUpperCase().slice(0,-1),\" REVIEWS\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"albums-grid\",children:posts===null||posts===void 0?void 0:posts.map(function(post){return/*#__PURE__*/_jsx(Link,{to:\"/\".concat(slug,\"/\").concat(post.slug),children:/*#__PURE__*/_jsx(Album,{img:post.coverPhoto.url,name:post.title,artist:post.artist,date:new Date(post.datePublished).toLocaleDateString('en-US',options)})},post.id);})}),/*#__PURE__*/_jsx(Pagination,{totalPage:totalPage})]});};export default Category;","map":{"version":3,"names":["React","useEffect","Album","tunnel","CATEGORY_POSTS_ALL","options","Link","useParams","useLocation","useQueryPosts","Pagination","useMyContext","useInView","NotFound","jsx","_jsx","jsxs","_jsxs","Category","_useQueryPosts","query","posts","error","status","_useParams","slug","location","_useMyContext","totalPage","_useInView","threshold","ref","inView","search","window","scrollTo","children","length","className","autoPlay","loop","muted","src","type","concat","toUpperCase","slice","map","post","to","img","coverPhoto","url","name","title","artist","date","Date","datePublished","toLocaleDateString","id"],"sources":["/Users/dootss/appdevelopment/blast/src/pages/reviews/Category.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\nimport Album from '../../components/Release';\nimport tunnel from '../../res/tunnel.mp4';\nimport './category.css';\nimport { CATEGORY_POSTS_ALL, options } from '../../graphql/Queries';\nimport { Link, useParams, useLocation } from 'react-router-dom';\nimport useQueryPosts from '../../hooks/useQueryPosts';\nimport Pagination from '../../components/Pagination';\nimport { useMyContext } from '../../context/store';\nimport { useInView } from 'react-intersection-observer';\nimport NotFound from '../../components/NotFound';\n\nconst Category = () => {\n  const { posts, error, status} = useQueryPosts({query: CATEGORY_POSTS_ALL});\n  const { slug } = useParams();\n  const location = useLocation();\n  const { totalPage } = useMyContext();\n  \n  const { ref, inView } = useInView({\n    threshold: 0.1, \n  });\n\n  useEffect(() => {\n    if (location.search === '') {\n      window.scrollTo(0, 0);\n    } else {\n      window.scrollTo(0, 600);\n    }\n  }, [location]);\n\n  if(error) return <h2>{error}</h2>\n  if(status !== 'start' && posts.length === 0) {\n    return <NotFound/>\n  }\n  return (\n    <main className='album-container'>\n      <header>\n        <video autoPlay loop muted className='album-video'>\n          <source src={tunnel} type='video/mp4' />\n        </video>\n        <div className='album-video-overlay'></div> \n        <h1 className={`album-header-title ${inView ? 'zoom-out' : ''}`} ref={ref}>\n          {slug.toUpperCase().slice(0, -1)} REVIEWS\n        </h1>    \n      </header>\n\n      <div className='albums-grid'>\n        {posts?.map(post => (\n          <Link \n            to={`/${slug}/${post.slug}`}\n           key={post.id}\n          >\n            <Album \n              img={post.coverPhoto.url}\n              name={post.title}\n              artist={post.artist}\n              date={new Date(post.datePublished).toLocaleDateString('en-US', options)}\n            />\n          </Link>\n        ))}\n      </div>\n\n      <Pagination totalPage={totalPage}/>\n    </main>\n  )\n}\n\nexport default Category\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dootss/appdevelopment/blast/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dootss/appdevelopment/blast/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/dootss/appdevelopment/blast/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./comments.css';import{useMyContext}from'../context/store';import Pagination from'./Pagination';import{useParams}from'react-router-dom';import{graphcms,CREATE_COMMENT,PUBLISH_COMMENT}from'../graphql/Mutations';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Comments=function Comments(_ref){var comments=_ref.comments;var _useParams=useParams(),slug=_useParams.slug;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useMyContext=useMyContext(),totalPage=_useMyContext.totalPage;function handleComment(_x){return _handleComment.apply(this,arguments);}function _handleComment(){_handleComment=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var obj,_yield$graphcms$reque,createComment;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();obj={name:name,comment:comment,slug:slug};setLoading(true);_context.next=5;return graphcms.request(CREATE_COMMENT,obj);case 5:_yield$graphcms$reque=_context.sent;createComment=_yield$graphcms$reque.createComment;_context.next=9;return graphcms.request(PUBLISH_COMMENT,{id:createComment.id});case 9:setLoading(false);window.location.reload();case 11:case\"end\":return _context.stop();}},_callee);}));return _handleComment.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"comments\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Post a Comment\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"post-comment\",onSubmit:handleComment,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,placeholder:\"Name\",value:name,onChange:function onChange(e){return setName(e.target.value);},autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"5\",placeholder:\"Comment\",requiredvalue:comment,onChange:function onChange(e){return setComment(e.target.value);},autoComplete:\"off\"}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,type:\"submit\",children:loading?'Loading...':'Post'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"loc\",children:[comments===null||comments===void 0?void 0:comments.map(function(comment){return/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:comment.name}),/*#__PURE__*/_jsx(\"p\",{children:comment.comment})]},comment.id);}),\";\",(comments===null||comments===void 0?void 0:comments.length)===0&&/*#__PURE__*/_jsx(\"p\",{className:\"be-the-first\",children:\"Be the first to comment!\"})]}),/*#__PURE__*/_jsx(Pagination,{totalPage:totalPage})]});};export default Comments;","map":{"version":3,"names":["React","useState","useMyContext","Pagination","useParams","graphcms","CREATE_COMMENT","PUBLISH_COMMENT","jsx","_jsx","jsxs","_jsxs","Comments","_ref","comments","_useParams","slug","_useState","_useState2","_slicedToArray","name","setName","_useState3","_useState4","comment","setComment","_useState5","_useState6","loading","setLoading","_useMyContext","totalPage","handleComment","_x","_handleComment","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","obj","_yield$graphcms$reque","createComment","wrap","_callee$","_context","prev","next","preventDefault","request","sent","id","window","location","reload","stop","className","children","onSubmit","type","required","placeholder","value","onChange","target","autoComplete","cols","rows","requiredvalue","disabled","map","length"],"sources":["/Users/dootss/appdevelopment/blast/src/components/Comments.jsx"],"sourcesContent":["import React, { useState } from 'react'\nimport './comments.css';\nimport { useMyContext } from '../context/store';\nimport Pagination from './Pagination';\nimport { useParams } from 'react-router-dom';\nimport { graphcms, CREATE_COMMENT, PUBLISH_COMMENT } from '../graphql/Mutations';\n\nconst Comments = ({comments}) => {\n  const { slug } = useParams();\n  const [name, setName] = useState('');\n  const [comment, setComment] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { totalPage } = useMyContext();\n\n  async function handleComment(e) {\n    e.preventDefault();\n    const obj = { name, comment, slug } \n    setLoading(true);\n\n    const { createComment } = await graphcms.request(CREATE_COMMENT, obj);\n\n    await graphcms.request(PUBLISH_COMMENT, { id: createComment.id });\n\n    setLoading(false);\n    window.location.reload();\n  }\n  return (\n    <div className='comments'>\n      <h2>Post a Comment</h2>\n      \n      <form className='post-comment' onSubmit={handleComment}>\n        <input \n          type=\"text\" \n          required \n          placeholder='Name'\n          value={name}\n          onChange={e => setName(e.target.value)}\n          autoComplete='off'\n        />\n\n        <textarea \n          cols=\"30\" \n          rows=\"5\" \n          placeholder='Comment'\n          requiredvalue={comment}\n          onChange={e => setComment(e.target.value)}\n          autoComplete='off'\n        />\n        <button disabled={loading} type='submit'> \n          {loading ? 'Loading...' : 'Post'}\n        </button>\n      </form>\n\n      <div className='loc'>\n        {\n          comments?.map(comment => (\n            <div className='comment' key={comment.id}>\n              <h4>{comment.name}</h4>\n              <p>{comment.comment}</p>\n            </div>\n          ))\n        };\n        {\n          comments?.length === 0 && \n          <p className='be-the-first'> \n            Be the first to comment!\n          </p>\n        }\n      </div>\n      \n      <Pagination totalPage={totalPage}/>\n      \n    </div>\n  )\n}\n\nexport default Comments\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}